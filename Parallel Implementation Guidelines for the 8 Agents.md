## إرشادات التنفيذ المتوازي للوكلاء الـ8

---

### **رسالة توجيهية لـ Worktree-1 (Project & Folder Structure Analyst)**

**المهمة المسندة إليك:** تحليل بنية المجلدات وإصلاح مسارات `shared/schema` في الملفات الستة الحرجة.

---

⚠️ **تنبيه هام: عملية تنفيذ متوازية**  
أنت تعمل ضمن فريق من **8 وكلاء** ينفذون مهاماً متزامنة على نفس المستودع. لتجنب التعارض والتداخل، يلتزم كل وكيل بنطاقه المحدد دون تجاوزه.

---

**الوكلاء الآخرون ومجالاتهم (يُنفذون حالياً):**

| Worktree | المسؤولية | الملفات/المجلدات |
|----------|-----------|------------------|
| **2** | تثبيت الاعتماديات (pnpm install) | `frontend/package.json`, `backend/package.json` |
| **3** | توحيد الـ Path Aliases | جميع ملفات `frontend/src/**` و`backend/src/**` (ما عدا المسارات المُصحّحة في مهمتك) |
| **4** | مراجعة ملفات التهيئة | `tsconfig.json`, `.env`, `*.config.js` |
| **5** | الفحص النهائي للأنواع | إعادة تشغيل `pnpm typecheck` و`tsc --noEmit` بعد الانتهاء من الجميع |
| **6** | تحليل أداء البناء | مجلدات `dist/`, `.next/`, `build/` |
| **7** | تحليل الاعتماديات الدائرية | `frontend/src/lib/drama-analyst/orchestration/`, `backend/src/services/` |
| **8** | التوثيق والإصدارات | `FIXES_APPLIED.md` وجذر المستودع |

---

**قواعد منع التعارض:**

1. **لا تلمس هذه الملفات أبداً:**  
   - `package.json` (مسؤولية Worktree-2 فقط)  
   - `tsconfig.json` (مسؤولية Worktree-4 فقط)  
   - أي ملف خارج المسارات الستة المُخصصة لك

2. **إذا وجدت خطأ في ملف خارج نطاقك:**  
   - لا تُصلحه بنفسك. سجل المشكلة في `FIXES_APPLIED.md` (غير المُنشأ بعد)  
   - أبلغ Worktree-8 بالمشكلة الفرعية لإضافتها إلى قائمة المهام المتبقية

3. **قبل حفظ أي تعديل:**  
   - تأكد أنك تعمل على الملفات الستة فقط:  
     ```
     frontend/src/lib/api.ts
     frontend/src/app/(main)/directors-studio/shots/page.tsx
     frontend/src/app/(main)/directors-studio/script/page.tsx
     frontend/src/app/(main)/directors-studio/scenes/page.tsx
     frontend/src/app/(main)/directors-studio/lib/api.ts
     frontend/src/app/(main)/directors-studio/characters/page.tsx
     ```

4. **التنسيق مع Worktree-3:**  
   - بعد إصلاح المسارات (`../shared/schema` → `./shared/schema`)، أبلغهم فوراً حتى يتجنبوا استخدام هذه المسارات القديمة في توحيد الـ Aliases

5. **إذا واجهت خطأ في البناء:**  
   - لا تعدل سكربتات البناء في `package.json`  
   - ركز على تصحيح المسار نفسه فقط

---

**نقطة الاتصال والتنسيق:**  
لأي تعارض أو تداخل غير متوقع، تواصل مع Worktree-8 (المنسق) أولاً قبل أي إجراء.

---

**تذكير:**  
أنت **الوكيل الوحيد المخول** بتعديل المسارات النسبية المكسورة. أي تغييرات مماثلة من الوكلاء الآخرين ستُعامل كتعارض ويُلغى تعديلها.

---

### **رسالة توجيهية لـ Worktree-2 (Dependency & Package Analyst)**

**المهمة المسندة إليك:** تثبيت الاعتماديات (`pnpm install`) في كلا البيئتين (frontend/backend).

---

⚠️ **تنبيه هام: عملية تنفيذ متوازية**  
أنت تعمل ضمن فريق من **8 وكلاء** ينفذون مهاماً متزامنة. مسؤوليتك هي إدارة الحزم فقط دون المساس بالكود.

---

**الوكلاء الآخرون ومجالاتهم (يُنفذون حالياً):**

| Worktree | المسؤولية | الملفات/المجلدات |
|----------|-----------|------------------|
| **1** | إصلاح مسارات `shared/schema` المكسورة | الملفات الستة في `frontend/src/**` |
| **3** | توحيد الـ Path Aliases | جميع ملفات `frontend/src/**` و`backend/src/**` |
| **4** | مراجعة ملفات التهيئة | `tsconfig.json`, `.env`, `*.config.js` |
| **5** | الفحص النهائي للأنواع | إعادة تشغيل `pnpm typecheck` و`tsc --noEmit` **بعدك مباشرة** |
| **6** | تحليل أداء البناء | مجلدات `dist/`, `.next/`, `build/` |
| **7** | تحليل الاعتماديات الدائرية | `frontend/src/lib/drama-analyst/orchestration/`, `backend/src/services/` |
| **8** | التوثيق والإصدارات | `FIXES_APPLIED.md` وجذر المستودع |

---

**قواعد منع التعارض:**

1. **لا تلمس الكود أبداً:**  
   - لا تعدل أي ملف `.ts` أو `.tsx`  
   - لا تغيّر مسارات الاستيراد أو الأنواع

2. **إذا ظهر خطأ بعد `pnpm install`:**  
   - إذا كان الخطأ من نوع "module not found" لحزمة مفقودة → ثبتها فوراً  
   - إذا كان الخطأ من نوع "type error" → أبلغ Worktree-5 (فاحص الأنواع) بالملف والخطأ  
   - **لا تعدل الكود لإخفاء الخطأ**

3. **التنسيق مع Worktree-4:**  
   - قبل تثبيت أي حزمة تتطلب تعديلاً في `tsconfig.json` أو ملفات تهيئة → استشره أولاً

4. **التنسيق مع Worktree-5:**  
   - بعد نجاح `pnpm install` في كلا البيئتين → أبلغه فوراً ليبدأ فحص الأنواع  
   - لا تشغل `pnpm build` أو `tsc --noEmit` أبداً (هذا دوره)

5. **ملفاتك الحصرية:**  
   - `frontend/package.json`  
   - `backend/package.json`  
   - `pnpm-lock.yaml` (في كلا المجلدين)  
   - `node_modules/` (لا تحذفها دون تنسيق مع Worktree-6)

6. **إذا اكتشفت حزمة غير مستخدمة:**  
   - لا تحذفها الآن. سجلها في قائمة تسلمها لـ Worktree-8 في النهاية

---

**نقطة الاتصال:**  
لأي شكوك حول اعتمادية حزمة مع Worktree-3 أو Worktree-4 → تواصل مع Worktree-8 أولاً.

---

**تذكير:**  
عملك هو **تثبيت الاعتماديات فقط**. نتيجتك هي `node_modules` عاملة و`pnpm-lock.yaml` محدثة. أي تعديل في الكود سيعتبر تعارضاً.

---

*(يتبع إرشادات Worktree-3 حتى Worktree-8 بنفس الصيغة...)*